#!/usr/bin/env python3
"""
–ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Ö–æ—Å—Ç–æ–≤ –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
"""
import os
import sys

def fix_admin_config():
    """–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏"""
    
    # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
    os.environ["ENVIRONMENT"] = "production"
    os.environ["ADMIN_ALLOWED_HOSTS"] = "*"
    os.environ["ADMIN_CORS_ORIGINS"] = "*"
    os.environ["ADMIN_HOST"] = "0.0.0.0"
    os.environ["ADMIN_PORT"] = "8080"
    
    print("üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏...")
    print(f"‚úÖ ADMIN_ALLOWED_HOSTS: {os.environ['ADMIN_ALLOWED_HOSTS']}")
    print(f"‚úÖ ADMIN_CORS_ORIGINS: {os.environ['ADMIN_CORS_ORIGINS']}")
    print(f"‚úÖ ADMIN_HOST: {os.environ['ADMIN_HOST']}")
    print(f"‚úÖ ADMIN_PORT: {os.environ['ADMIN_PORT']}")
    
    # –ó–∞–ø—É—Å–∫–∞–µ–º –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
    try:
        import uvicorn
        from admin.app import app
        
        print("üåê –ó–∞–ø—É—Å–∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏...")
        
        uvicorn.run(
            app,
            host="0.0.0.0",
            port=8080,
            log_level="info",
            access_log=True
        )
        
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞: {e}")
        return False
    
    return True

if __name__ == "__main__":
    fix_admin_config()
