<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>
			{% block title %}Админ-панель{% endblock %} - Telegram Channel Finder Bot
		</title>

		<!-- Bootstrap CSS -->
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
			rel="stylesheet"
		/>
		<!-- Font Awesome -->
		<link
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
			rel="stylesheet"
		/>
		<!-- Custom CSS -->
		<link href="/static/css/admin.css" rel="stylesheet" />

		{% block extra_css %}{% endblock %}
	</head>
	<body>
		<div class="container-fluid">
			<div class="row">
				<!-- Sidebar -->
				<nav class="col-md-3 col-lg-2 d-md-block sidebar collapse">
					<div class="position-sticky pt-4">
						<div class="text-center mb-5">
							<div
								class="d-flex align-items-center justify-content-center mb-3"
							>
								<i
									class="fas fa-robot text-white me-2"
									style="font-size: 2rem"
								></i>
							</div>
							<h5 class="text-white fw-bold mb-1">Telegram Bot</h5>
							<small class="text-white-50">Админ-панель</small>
						</div>

						<ul class="nav flex-column">
							<li class="nav-item">
								<a class="nav-link" href="/dashboard">
									<i class="fas fa-tachometer-alt me-2"></i> Дашборд
								</a>
							</li>
							<li class="nav-item">
								<a class="nav-link" href="/users">
									<i class="fas fa-users me-2"></i> Пользователи
								</a>
							</li>
							<li class="nav-item">
								<a class="nav-link" href="/broadcasts">
									<i class="fas fa-bullhorn me-2"></i> Рассылки
								</a>
							</li>
							<li class="nav-item">
								<a class="nav-link" href="/templates">
									<i class="fas fa-file-alt me-2"></i> Шаблоны
								</a>
							</li>
							<li class="nav-item">
								<a class="nav-link" href="/statistics">
									<i class="fas fa-chart-bar me-2"></i> Статистика
								</a>
							</li>
							<li class="nav-item">
								<a class="nav-link" href="/audit">
									<i class="fas fa-clipboard-list me-2"></i> Логи аудита
								</a>
							</li>
							<li class="nav-item">
								<a class="nav-link" href="/payment-cleanup/payment-cleanup">
									<i class="fas fa-broom me-2"></i> Очистка платежей
								</a>
							</li>
						</ul>
					</div>
				</nav>

				<!-- Main content -->
				<main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
					<div
						class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"
					>
						<h1 class="h2">{% block page_title %}Админ-панель{% endblock %}</h1>
						<div class="btn-toolbar mb-2 mb-md-0">
							<div class="dropdown">
								<button
									class="btn btn-outline-secondary dropdown-toggle"
									type="button"
									data-bs-toggle="dropdown"
								>
									<i class="fas fa-user"></i>
									{% if current_user %}{{ current_user.username }}{% else
									%}Профиль{% endif %}
								</button>
								<ul class="dropdown-menu">
									{% if current_user %}
									<li>
										<h6 class="dropdown-header">{{ current_user.username }}</h6>
									</li>
									<li>
										<span class="dropdown-item-text">
											<small class="text-muted"
												>Роль: {{ current_user.role }}</small
											>
										</span>
									</li>
									<li><hr class="dropdown-divider" /></li>
									{% endif %}
									<li>
										<a class="dropdown-item" href="/api/docs" target="_blank">
											<i class="fas fa-book me-2"></i>API Документация
										</a>
									</li>
									<li><hr class="dropdown-divider" /></li>
									<li>
										<a class="dropdown-item" href="/auth/logout">
											<i class="fas fa-sign-out-alt me-2"></i>Выход
										</a>
									</li>
								</ul>
							</div>
						</div>
					</div>

					{% block content %}{% endblock %}
				</main>
			</div>
		</div>

		<!-- Bootstrap JS -->
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
		<!-- Chart.js -->
		<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
		<!-- Custom JS -->
		<script src="/static/js/admin.js"></script>

		{% block extra_js %}{% endblock %}
	</body>
</html>
